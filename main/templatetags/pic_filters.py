# ----------------------------
#  Andrea Silvestroni 2019
#  Residual Noise Extraction and Smartphone Linking
#
#  Template filters used for pictures
# ----------------------------

from django import template

import os
import base64

register = template.Library()


@register.filter
def pic_url(path):
    """
    Replaces a url from storage to static files
    :param path: The path to a stored file
    :return: The url to a static file
    """
    return path.replace('storage/', 'static/')


@register.filter
def pic_thumb(pic):
    """
    Encodes the provided picture into base64 to prevent serving static files
    :param pic:
    :return:
    """
    # TODO: this needs to be removed if static files serving is enabled
    if not os.path.isfile(pic):
        print('Cant find ' + pic)
        return 'data:image/png;base64,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'

    with open(pic, 'rb') as img_f:
        encoded_string = base64.b64encode(img_f.read())
        return 'data:image/%s;base64,%s' % ('png', encoded_string.decode('utf-8'))


@register.filter
def type_text_color(type):
    """
    Returns the appropriate text color for a given picture type
    :param type: Type of the picture/cluster
    :return: An appropriate text color considering the associated background for the same type
    """
    if type == 'facebook':
        return 'white'
    if type == 'original':
        return 'white'


@register.filter
def pic_border(status):
    from main.logic.common import const

    if status == const.status_extracted:
        return 'success'
    if status == const.status_extracting:
        return 'warning'
    if status in [const.status_invalid_size]:
        return 'alert'
    return 'transparent'
